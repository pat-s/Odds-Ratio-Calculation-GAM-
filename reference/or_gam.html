<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calculate Odds Ratios of Generalized Additive (Mixed) Models — or_gam • oddsratio</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Calculate Odds Ratios of Generalized Additive (Mixed) Models — or_gam" />
<meta property="og:description" content="This function calculates odds ratio(s) for specific increment
steps of GAM(M) models. Odds ratios can also be calculated for continuous
(percentage) increment steps across the whole predictor distribution using
slice = TRUE." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">oddsratio</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/oddsratio.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/pat-s/oddsratio/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate Odds Ratios of Generalized Additive (Mixed) Models</h1>
    <small class="dont-index">Source: <a href='https://github.com/pat-s/oddsratio/blob/master/R/or_gam.R'><code>R/or_gam.R</code></a></small>
    <div class="hidden name"><code>or_gam.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function calculates odds ratio(s) for specific increment
steps of GAM(M) models. Odds ratios can also be calculated for continuous
(percentage) increment steps across the whole predictor distribution using
<code>slice = TRUE</code>.</p>
    </div>

    <pre class="usage"><span class='fu'>or_gam</span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='cn'>NULL</span>,
  model <span class='op'>=</span> <span class='cn'>NULL</span>,
  pred <span class='op'>=</span> <span class='cn'>NULL</span>,
  values <span class='op'>=</span> <span class='cn'>NULL</span>,
  percentage <span class='op'>=</span> <span class='cn'>NULL</span>,
  slice <span class='op'>=</span> <span class='cn'>FALSE</span>,
  ci <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>The data used for model fitting.</p></td>
    </tr>
    <tr>
      <th>model</th>
      <td><p>A fitted GAM(M).</p></td>
    </tr>
    <tr>
      <th>pred</th>
      <td><p>Predictor name for which to calculate the odds ratio.</p></td>
    </tr>
    <tr>
      <th>values</th>
      <td><p>Numeric vector of length two. Predictor values to estimate odds
ratio from. Function is written to use the first provided value as the
"lower" one, i.e. calculating the odds ratio 'from value1 to value2'. Only
used if <code>slice = FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>percentage</th>
      <td><p>Percentage number to split the predictor distribution into.
A value of 10 would split the predictor distribution by 10\<!-- % intervals. -->
Only needed if <code>slice = TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>slice</th>
      <td><p>Whether to calculate odds ratios for fixed increment steps over
the whole predictor distribution. See <code>percentage</code> for setting the
increment values.</p></td>
    </tr>
    <tr>
      <th>ci</th>
      <td><p>Currently fixed to 95\<!-- % confidence interval level (2.5\\% - 97.5\\%). --></p>
<p>Currently supported functions: <a href='https://rdrr.io/pkg/mgcv/man/gam.html'>mgcv::gam</a>, <a href='https://rdrr.io/pkg/mgcv/man/gamm.html'>mgcv::gamm</a>,
<a href='https://rdrr.io/pkg/gam/man/gam.html'>gam::gam</a>. For <a href='https://rdrr.io/pkg/mgcv/man/gamm.html'>mgcv::gamm</a>, the <code>model</code> input of or_gam needs to be the
<code>gam</code> output (e.g. <code>fit_gam$gam</code>).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a> with (up to) eight columns. <code>perc1</code> and <code>perc2</code> are
only returned if <code>slice = TRUE</code>:</p>
<dt>predictor</dt><dd><p>Predictor name</p></dd>
<dt>value1</dt><dd><p>First value of odds ratio calculation</p></dd>
<dt>value2</dt><dd><p>Second value of odds ratio calculation</p></dd>
<dt>perc1</dt><dd><p>Percentage value of <code>value1</code></p></dd>
<dt>perc2</dt><dd><p>Percentage value of <code>value2</code></p></dd>
<dt>oddsratio</dt><dd><p>Calculated odds ratio(s)</p></dd>
<dt>ci_low</dt><dd><p>Lower <code>(2.5%)</code> confident interval of odds ratio</p></dd>
<dt>ci_high</dt><dd><p>Higher <code>(97.5%)</code> confident interval of odds ratio</p></dd>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='or_glm.html'>or_glm()</a></code> <code><a href='plot_gam.html'>plot_gam()</a></code> <code><a href='insert_or.html'>insert_or()</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/pat-s/oddsratio'>oddsratio</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>mgcv</span><span class='op'>)</span>
<span class='va'>fit_gam</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/mgcv/man/gam.html'>gam</a></span><span class='op'>(</span><span class='va'>y</span> <span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/pkg/mgcv/man/s.html'>s</a></span><span class='op'>(</span><span class='va'>x0</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/pkg/mgcv/man/s.html'>s</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/AsIs.html'>I</a></span><span class='op'>(</span><span class='va'>x1</span><span class='op'>^</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/pkg/mgcv/man/s.html'>s</a></span><span class='op'>(</span><span class='va'>x2</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/offset.html'>offset</a></span><span class='op'>(</span><span class='va'>x3</span><span class='op'>)</span> <span class='op'>+</span> <span class='va'>x4</span>, data <span class='op'>=</span> <span class='va'>data_gam</span><span class='op'>)</span> <span class='co'># fit model</span>

<span class='co'># Calculate OR for specific increment step of continuous variable</span>
<span class='fu'>or_gam</span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='va'>data_gam</span>, model <span class='op'>=</span> <span class='va'>fit_gam</span>, pred <span class='op'>=</span> <span class='st'>"x2"</span>,
  values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.099</span>, <span class='fl'>0.198</span><span class='op'>)</span>
<span class='op'>)</span>
</div><div class='output co'>#&gt;   predictor value1 value2 oddsratio CI_low (2.5%) CI_high (97.5%)
#&gt; 1        x2  0.099  0.198  23.32353      23.30424        23.34283</div><div class='input'>
<span class='co'>## Calculate OR for change of indicator variable</span>
<span class='fu'>or_gam</span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='va'>data_gam</span>, model <span class='op'>=</span> <span class='va'>fit_gam</span>, pred <span class='op'>=</span> <span class='st'>"x4"</span>,
  values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"B"</span>, <span class='st'>"D"</span><span class='op'>)</span>
<span class='op'>)</span>
</div><div class='output co'>#&gt;   predictor value1 value2 oddsratio CI_low (2.5%) CI_high (97.5%)
#&gt; 1        x4      B      D 0.4744264     0.4976375        0.452298</div><div class='input'>
<span class='co'>## Calculate ORs for percentage increments of predictor distribution</span>
<span class='co'>## (here: 20%)</span>
<span class='fu'>or_gam</span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='va'>data_gam</span>, model <span class='op'>=</span> <span class='va'>fit_gam</span>, pred <span class='op'>=</span> <span class='st'>"x2"</span>,
  percentage <span class='op'>=</span> <span class='fl'>20</span>, slice <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span>
</div><div class='output co'>#&gt;   predictor value1 value2 perc1 perc2 oddsratio CI_low (2.5%) CI_high (97.5%)
#&gt; 1        x2  0.001  0.200     0    20   2510.77       1091.68         5774.53
#&gt; 2        x2  0.200  0.400    20    40      0.03          0.03            0.03
#&gt; 3        x2  0.400  0.599    40    60      0.58          0.56            0.60
#&gt; 4        x2  0.599  0.799    60    80      0.06          0.06            0.06
#&gt; 5        x2  0.799  0.998    80   100      0.41          0.75            0.22</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://pat-s.me'>Patrick Schratz</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


